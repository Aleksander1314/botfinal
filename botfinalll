import logging
from datetime import datetime, timedelta
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes
import signal
import sys
import os

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO,
    handlers=[
        logging.FileHandler('bot.log'),
        logging.StreamHandler()
    ]
)

# –ú–µ–Ω—é –¥–ª—è —è—Å–µ–ª—å–Ω–æ–π –≥—Ä—É–ø–ø—ã (10 –¥–Ω–µ–π)
NURSERY_MENU = {
    1: {  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –∂–∏–¥–∫–∞—è, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å –¥–∂–µ–º–æ–º, –±–∞—Ç–æ–Ω, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–æ–ª–µ–Ω—ã–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –∫–ª–µ—Ü–∫–∞–º–∏, —Ä—ã–±–∞ –∑–∞–ø–µ—á–µ–Ω–Ω–∞—è –≤ –æ–º–ª–µ—Ç–µ, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ —Å –º–æ—Ä–∫–æ–≤—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —Å–æ–∫ –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–ª–æ–≤ —Å –∫—É—Ä–æ–π, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º, –ø–∏—Ä–æ–∂–æ–∫ –ø–µ—á–µ–Ω—ã–π —Å –∫–∞–ø—É—Å—Ç–æ–π –∏ —è–π—Ü–æ–º (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    2: {  # –í—Ç–æ—Ä–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ —Ä–∏—Å–æ–≤–∞—è –∂–∏–¥–∫–∞—è, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ö–µ—Ñ–∏—Ä (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∫–ª—ã, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –º–∞–∫–∞—Ä–æ–Ω–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏, –ø–µ—á–µ–Ω—å –ø–æ-—Å—Ç—Ä–æ–≥–∞–Ω–æ–≤—Å–∫–∏, –∫–∞—à–∞ –≥—Ä–µ—á–Ω–µ–≤–∞—è —Ä–∞—Å—Å—ã–ø—á–∞—Ç–∞—è, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ –∏–∑—é–º–∞',
        '–ø–æ–ª–¥–Ω–∏–∫': '–®–Ω–∏—Ü–µ–ª—å —Ä—ã–±–Ω—ã–π –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –ø–ª–æ–¥–æ–≤ —à–∏–ø–æ–≤–Ω–∏–∫–∞, –≤–∞—Ñ–ª–∏ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –∞–ø–µ–ª—å—Å–∏–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    3: {  # –°—Ä–µ–¥–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–°–∞–ª–∞—Ç –∏–∑ –≥–æ—Ä–æ—à–∫–∞ –∑–µ–ª–µ–Ω–æ–≥–æ, –æ–º–ª–µ—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, –±–æ—Ä—â, –≥—É–ª—è—à –∏–∑ –æ—Ç–≤–∞—Ä–Ω–æ–≥–æ –º—è—Å–∞, –º–∞–∫–∞—Ä–æ–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –æ—Ç–≤–∞—Ä–Ω—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ –∞–±—Ä–∏–∫–æ—Å–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, –≥–æ–ª—É–±—Ü—ã –ª–µ–Ω–∏–≤—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ —Å–≤–µ–∂–∏—Ö —è–±–ª–æ–∫, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    4: {  # –ß–µ—Ç–≤–µ—Ä–≥
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –º–∞–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–†—è–∂–µ–Ω–∫–∞ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, —Å—É–ø –∏–∑ –æ–≤–æ—â–µ–π, —à–Ω–∏—Ü–µ–ª—å —Ä—ã–±–Ω—ã–π –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, —Ä–∞–≥—É –æ–≤–æ—â–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —Å–æ–∫ —è–±–ª–æ—á–Ω—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –¥–∂–µ–º–æ–º, –±–∞—Ç–æ–Ω, –º–æ–ª–æ–∫–æ –∫–∏–ø—è—á–µ–Ω–æ–µ, –ø–µ—á–µ–Ω—å–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    5: {  # –ü—è—Ç–Ω–∏—Ü–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –∏–∑ –ø—à–µ–Ω–∞ –∏ —Ä–∏—Å–∞ –º–æ–ª–æ—á–Ω–∞—è, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∫–ª—ã, —Ä–∞—Å—Å–æ–ª—å–Ω–∏–∫ –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, –∫–æ—Ç–ª–µ—Ç–∞ –º—è—Å–Ω–∞—è (–≥–æ–≤—è–¥–∏–Ω–∞), –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, –º–∞–∫–∞—Ä–æ–Ω—ã –∑–∞–ø–µ—á–µ–Ω–Ω—ã–µ —Å —è–π—Ü–æ–º, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –∫–ª—é–∫–≤—ã –ø—Ä–æ—Ç–µ—Ä—Ç–æ–π —Å —Å–∞—Ö–∞—Ä–æ–º, –≥—Ä—É—à–∞ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    6: {  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –ø—à–µ–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–æ–ª–µ–Ω—ã–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –≥–æ—Ä–æ—Ö–æ–º –∏ –≥—Ä–µ–Ω–∫–∞–º–∏, –∫–æ—Ç–ª–µ—Ç–∞ –º—è—Å–Ω–∞—è (–≥–æ–≤—è–¥–∏–Ω–∞), –æ–≤–æ—â–∏ –≤ –º–æ–ª–æ—á–Ω–æ–º —Å–æ—É—Å–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–∏—Å–µ–ª—å –∏–∑ –∫—É—Ä–∞–≥–∏',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, —Ä—ã–±–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ —Å –º–æ—Ä–∫–æ–≤—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –ª–∏–º–æ–Ω–Ω—ã–π, –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    7: {  # –í—Ç–æ—Ä–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–°–∞–ª–∞—Ç –∏–∑ –≥–æ—Ä–æ—à–∫–∞ –∑–µ–ª–µ–Ω–æ–≥–æ, –æ–º–ª–µ—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ö–µ—Ñ–∏—Ä (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π, —â–∏ –∏–∑ —Å–≤–µ–∂–µ–π –∫–∞–ø—É—Å—Ç—ã, —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∏ –∏–∑ –ø—Ç–∏—Ü—ã, –ø—é—Ä–µ –∏–∑ —Å–≤–µ–∫–ª—ã, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–í–∏–Ω–µ–≥—Ä–µ—Ç –æ–≤–æ—â–Ω–æ–π —Å —Å–µ–ª—å–¥—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ —á–µ—Ä–Ω–æ—Å–ª–∏–≤–∞, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    8: {  # –°—Ä–µ–¥–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –º–∞–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –º–∞–∫–∞—Ä–æ–Ω–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏, –ø—É–¥–∏–Ω–≥ –∏–∑ –ø–µ—á–µ–Ω–∏ —Å –º–æ—Ä–∫–æ–≤—å—é, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –∫–∏—Å–µ–ª—å –∏–∑ —è–±–ª–æ–∫',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –¥–∂–µ–º–æ–º, –±–∞—Ç–æ–Ω, –º–æ–ª–æ–∫–æ –∫–∏–ø—è—á–µ–Ω–æ–µ, –ø—Ä—è–Ω–∏–∫–∏ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    9: {  # –ß–µ—Ç–≤–µ—Ä–≥
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –æ–≤—Å—è–Ω–∞—è –ì–µ—Ä–∫—É–ª–µ—Å –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–†—è–∂–µ–Ω–∫–∞ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, –±–æ—Ä—â, —Ä—ã–±–∞ —Ç—É—à–µ–Ω–Ω–∞—è –≤ —Ç–æ–º–∞—Ç–µ —Å –æ–≤–æ—â–∞–º–∏, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å –æ—Ç–≤–∞—Ä–Ω–æ–π, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ —è–±–ª–æ—á–Ω—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ì–æ–ª—É–±—Ü—ã –ª–µ–Ω–∏–≤—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ —Å–≤–µ–∂–∏—Ö —è–±–ª–æ–∫, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), —è–±–ª–æ–∫–æ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    10: {  # –ü—è—Ç–Ω–∏—Ü–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ —Ä–∏—Å–æ–≤–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∫–ª—ã, —Ä–∞—Å—Å–æ–ª—å–Ω–∏–∫ –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∏ –∏–∑ –ø—Ç–∏—Ü—ã, –æ–≤–æ—â–∏ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—ã–µ –≤ —Å–º–µ—Ç–∞–Ω–Ω–æ–º —Å–æ—É—Å–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –∫–ª—é–∫–≤—ã –ø—Ä–æ—Ç–µ—Ä—Ç–æ–π —Å —Å–∞—Ö–∞—Ä–æ–º',
        '–ø–æ–ª–¥–Ω–∏–∫': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, –∂–∞—Ä–∫–æ–µ –ø–æ-–¥–æ–º–∞—à–Ω–µ–º—É, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ —á–µ—Ä–Ω–æ—Å–ª–∏–≤–∞, –≤–∞—Ç—Ä—É—à–∫–∞ —Å –¥–∂–µ–º–æ–º (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –º–∞–Ω–¥–∞—Ä–∏–Ω—ã —Å–≤–µ–∂–∏–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    }
}

# –ú–µ–Ω—é –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã (10 –¥–Ω–µ–π)
MAIN_MENU = {
    1: {  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å –¥–∂–µ–º–æ–º, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–æ–ª–µ–Ω—ã–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –∫–ª–µ—Ü–∫–∞–º–∏, —Ä—ã–±–∞ –∑–∞–ø–µ—á–µ–Ω–Ω–∞—è –≤ –æ–º–ª–µ—Ç–µ, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ —Å –º–æ—Ä–∫–æ–≤—å—é, –±–∞—Ç–æ–Ω, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —Å–æ–∫ –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–ª–æ–≤ –∏–∑ –ø—Ç–∏—Ü—ã, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º –∏ —Å–∞—Ö–∞—Ä–æ–º, –ø–∏—Ä–æ–∂–æ–∫ –ø–µ—á–µ–Ω—ã–π —Å –∫–∞–ø—É—Å—Ç–æ–π –∏ —è–π—Ü–æ–º (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), —è–±–ª–æ–∫–æ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    2: {  # –í—Ç–æ—Ä–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ —Ä–∏—Å–æ–≤–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ö–µ—Ñ–∏—Ä (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ –º–æ—Ä–∫–æ–≤–∏ –∏ —è–±–ª–æ–∫, —â–∏ –∏–∑ —Å–≤–µ–∂–µ–π –∫–∞–ø—É—Å—Ç—ã, –ø–µ—á–µ–Ω—å –ø–æ-—Å—Ç—Ä–æ–≥–∞–Ω–æ–≤—Å–∫–∏, –º–∞–∫–∞—Ä–æ–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –æ—Ç–≤–∞—Ä–Ω—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –∫–æ–º–ø–æ—Ç –∏–∑ –∏–∑—é–º–∞',
        '–ø–æ–ª–¥–Ω–∏–∫': '–®–Ω–∏—Ü–µ–ª—å —Ä—ã–±–Ω—ã–π –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –ø–ª–æ–¥–æ–≤ —à–∏–ø–æ–≤–Ω–∏–∫–∞, –≤–∞—Ñ–ª–∏ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    3: {  # –°—Ä–µ–¥–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–°–∞–ª–∞—Ç –∏–∑ –≥–æ—Ä–æ—à–∫–∞ –∑–µ–ª–µ–Ω–æ–≥–æ, –æ–º–ª–µ—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, —Å—É–ø –∏–∑ –æ–≤–æ—â–µ–π, –≥—É–ª—è—à –∏–∑ –æ—Ç–≤–∞—Ä–Ω–æ–≥–æ –º—è—Å–∞, –∫–∞—à–∞ –≥—Ä–µ—á–Ω–µ–≤–∞—è —Ä–∞—Å—Å—ã–ø—á–∞—Ç–∞—è, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ –∞–±—Ä–∏–∫–æ—Å–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, –≥–æ–ª—É–±—Ü—ã –ª–µ–Ω–∏–≤—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–æ–º–ø–æ—Ç –∏–∑ —Å–≤–µ–∂–∏—Ö —è–±–ª–æ–∫, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    4: {  # –ß–µ—Ç–≤–µ—Ä–≥
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –º–∞–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–†—è–∂–µ–Ω–∫–∞ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, —Ä–∞—Å—Å–æ–ª—å–Ω–∏–∫ –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, —à–Ω–∏—Ü–µ–ª—å —Ä—ã–±–Ω—ã–π, —Ä–∞–≥—É –æ–≤–æ—â–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –∫–æ–º–ø–æ—Ç –∏–∑ —á–µ—Ä–Ω–æ—Å–ª–∏–≤–∞',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –¥–∂–µ–º–æ–º, –±–∞—Ç–æ–Ω, –º–æ–ª–æ–∫–æ –∫–∏–ø—è—á–µ–Ω–æ–µ, –ø—Ä—è–Ω–∏–∫–∏ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    5: {  # –ü—è—Ç–Ω–∏—Ü–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –î—Ä—É–∂–±–∞, –±–∞—Ç–æ–Ω, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∫–ª—ã, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –º—è—Å–Ω—ã–º–∏ —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∞–º–∏, –∫–æ—Ç–ª–µ—Ç–∞ –º—è—Å–Ω–∞—è (–≥–æ–≤—è–¥–∏–Ω–∞), –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ —Å –º–æ—Ä–∫–æ–≤—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –Ω–∞–ø–∏—Ç–æ–∫ –≤–∏—Ç–∞–º–∏–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, –º–∞–∫–∞—Ä–æ–Ω—ã –∑–∞–ø–µ—á–µ–Ω–Ω—ã–µ —Å —è–π—Ü–æ–º, –±–∞—Ç–æ–Ω, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –∫–ª—é–∫–≤—ã –ø—Ä–æ—Ç–µ—Ä—Ç–æ–π —Å —Å–∞—Ö–∞—Ä–æ–º, –ø–µ—á–µ–Ω—å–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    6: {  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –ø—à–µ–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–æ–ª–µ–Ω—ã–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –≥–æ—Ä–æ—Ö–æ–º –∏ –≥—Ä–µ–Ω–∫–∞–º–∏, –∫–æ—Ç–ª–µ—Ç–∞ –º—è—Å–Ω–∞—è (–≥–æ–≤—è–¥–∏–Ω–∞), –æ–≤–æ—â–∏ –≤ –º–æ–ª–æ—á–Ω–æ–º —Å–æ—É—Å–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –∫–∏—Å–µ–ª—å –∏–∑ –∫—É—Ä–∞–≥–∏',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, —à–Ω–∏—Ü–µ–ª—å —Ä—ã–±–Ω—ã–π –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ –ø—é—Ä–µ —Å –º–æ—Ä–∫–æ–≤—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, —Å–æ–∫ —è–±–ª–æ—á–Ω—ã–π, –ø–µ—á–µ–Ω—å–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    7: {  # –í—Ç–æ—Ä–Ω–∏–∫
        '–∑–∞–≤—Ç—Ä–∞–∫': '–°–∞–ª–∞—Ç –∏–∑ –≥–æ—Ä–æ—à–∫–∞ –∑–µ–ª–µ–Ω–æ–≥–æ, –æ–º–ª–µ—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ö–µ—Ñ–∏—Ä (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π, —â–∏ –∏–∑ –∫–≤–∞—à–µ–Ω–æ–π –∫–∞–ø—É—Å—Ç—ã, —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∏ –∏–∑ –ø—Ç–∏—Ü—ã, –ø—é—Ä–µ –∏–∑ —Å–≤–µ–∫–ª—ã, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, –∫–æ–º–ø–æ—Ç –∏–∑ —á–µ—Ä–Ω–æ—Å–ª–∏–≤–∞',
        '–ø–æ–ª–¥–Ω–∏–∫': '–í–∏–Ω–µ–≥—Ä–µ—Ç –æ–≤–æ—â–Ω–æ–π —Å —Å–µ–ª—å–¥—å—é, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –ª–∏–º–æ–Ω–Ω—ã–π, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –≥—Ä—É—à–∞ —Å–≤–µ–∂–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    8: {  # –°—Ä–µ–¥–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –º–∞–Ω–Ω–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, –±—É—Ç–µ—Ä–±—Ä–æ–¥ —Å —Å—ã—Ä–æ–º, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–ü–æ–º–∏–¥–æ—Ä —Å–≤–µ–∂–∏–π, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å –º–∞–∫–∞—Ä–æ–Ω–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏ –∏ –ø—Ç–∏—Ü–µ–π, –ø—É–¥–∏–Ω–≥ –∏–∑ –ø–µ—á–µ–Ω–∏ —Å –º–æ—Ä–∫–æ–≤—å—é, —Ä–∞–≥—É –æ–≤–æ—â–Ω–æ–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –∫–∏—Å–µ–ª—å –∏–∑ —è–±–ª–æ–∫',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –¥–∂–µ–º–æ–º, –±–∞—Ç–æ–Ω, –º–æ–ª–æ–∫–æ –∫–∏–ø—è—á–µ–Ω–æ–µ, –ø—Ä—è–Ω–∏–∫ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –±–∞–Ω–∞–Ω (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    9: {  # –ß–µ—Ç–≤–µ—Ä–≥
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ –æ–≤—Å—è–Ω–∞—è –ì–µ—Ä–∫—É–ª–µ—Å –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —á–∞–π —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–†—è–∂–µ–Ω–∫–∞ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, –±–æ—Ä—â, —Ä—ã–±–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Å–æ–∫ –∞–±—Ä–∏–∫–æ—Å–æ–≤—ã–π, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω',
        '–ø–æ–ª–¥–Ω–∏–∫': '–ì–æ–ª—É–±—Ü—ã –ª–µ–Ω–∏–≤—ã–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –≤–∏—Ç–∞–º–∏–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –±—É–ª–æ—á–∫–∞ —Ç–≤–æ—Ä–æ–∂–Ω–∞—è (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), —è–±–ª–æ–∫–æ —Å–≤–µ–∂–µ–µ (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    },
    10: {  # –ü—è—Ç–Ω–∏—Ü–∞
        '–∑–∞–≤—Ç—Ä–∞–∫': '–ö–∞—à–∞ —Ä–∏—Å–æ–≤–∞—è –∂–∏–¥–∫–∞—è, –±–∞—Ç–æ–Ω, —è–π—Ü–æ –≤–∞—Ä–µ–Ω–æ–µ, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –º–æ–ª–æ–∫–æ–º',
        '–≤—Ç–æ—Ä–æ–π –∑–∞–≤—Ç—Ä–∞–∫': '–ô–æ–≥—É—Ä—Ç (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)',
        '–æ–±–µ–¥': '–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∫–ª—ã, —Ä–∞—Å—Å–æ–ª—å–Ω–∏–∫ –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, –∫–æ—Ç–ª–µ—Ç–∞ —Ä—É–±–ª–µ–Ω–∞—è –∏–∑ –∫—É—Ä–∏—Ü—ã, –æ–≤–æ—â–∏ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—ã–µ –≤ —Å–º–µ—Ç–∞–Ω–Ω–æ–º —Å–æ—É—Å–µ, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –±–∞—Ç–æ–Ω, —Å–æ–∫ –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π',
        '–ø–æ–ª–¥–Ω–∏–∫': '–û–≥—É—Ä–µ—Ü —Å–≤–µ–∂–∏–π, –∂–∞—Ä–∫–æ–µ –ø–æ-–¥–æ–º–∞—à–Ω–µ–º—É, —Ö–ª–µ–± —Ä–∂–∞–Ω–æ–π, –Ω–∞–ø–∏—Ç–æ–∫ –∏–∑ –∫–ª—é–∫–≤—ã –ø—Ä–æ—Ç–µ—Ä—Ç–æ–π —Å —Å–∞—Ö–∞—Ä–æ–º, –≤–∞—Ç—Ä—É—à–∫–∞ —Å –¥–∂–µ–º–æ–º (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞), –º–∞–Ω–¥–∞—Ä–∏–Ω —Å–≤–µ–∂–∏–π (–≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–º–µ–Ω–∞)'
    }
}

# –ù–ê–°–¢–†–û–ô–ö–ê –ù–ê–ß–ê–õ–ê –¶–ò–ö–õ–ê - 06.10.2025 –±—É–¥–µ—Ç –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–æ–º (1-–π –¥–µ–Ω—å)
CYCLE_START_DATE = datetime(2025, 10, 6)


def is_weekend(date=None):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–µ–Ω—å –≤—ã—Ö–æ–¥–Ω—ã–º (—Å—É–±–±–æ—Ç–∞ –∏–ª–∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)"""
    if date is None:
        date = datetime.now()
    return date.weekday() >= 5  # 5 = —Å—É–±–±–æ—Ç–∞, 6 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ


def get_working_days_count(start_date, end_date):
    """–ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –º–µ–∂–¥—É –¥–≤—É–º—è –¥–∞—Ç–∞–º–∏"""
    count = 0
    current_date = start_date
    while current_date <= end_date:
        if not is_weekend(current_date):
            count += 1
        current_date += timedelta(days=1)
    return count


def get_day_number(date=None):
    """
    –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: —Å—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ –æ—Ç 06.10.2025
    """
    if date is None:
        date = datetime.now()

    # –ï—Å–ª–∏ –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–Ω–∞—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–º–µ—Ä –¥–Ω—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
    if is_weekend(date):
        # –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å (–ø—è—Ç–Ω–∏—Ü—É)
        days_back = 1
        while is_weekend(date - timedelta(days=days_back)):
            days_back += 1
        prev_working_day = date - timedelta(days=days_back)
        working_days_count = get_working_days_count(CYCLE_START_DATE, prev_working_day)
    else:
        # –î–ª—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è —Å—á–∏—Ç–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ
        working_days_count = get_working_days_count(CYCLE_START_DATE, date)

    day_number = (working_days_count % 10) or 10  # –æ—Ç 1 –¥–æ 10

    logging.info(f"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è –¥–∞—Ç–∞: {date.strftime('%d.%m.%Y %A')}")
    logging.info(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –æ—Ç –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞: {working_days_count}")
    logging.info(f"–ù–æ–º–µ—Ä –¥–Ω—è –≤ —Ü–∏–∫–ª–µ: {day_number} - {get_day_name(day_number)}")
    logging.info(f"–í—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å: {is_weekend(date)}")

    return day_number


def get_day_name(day_number):
    """–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è –ø–æ –Ω–æ–º–µ—Ä—É"""
    day_names = {
        1: "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ (1 –Ω–µ–¥–µ–ª—è)",
        2: "–í—Ç–æ—Ä–Ω–∏–∫ (1 –Ω–µ–¥–µ–ª—è)",
        3: "–°—Ä–µ–¥–∞ (1 –Ω–µ–¥–µ–ª—è)",
        4: "–ß–µ—Ç–≤–µ—Ä–≥ (1 –Ω–µ–¥–µ–ª—è)",
        5: "–ü—è—Ç–Ω–∏—Ü–∞ (1 –Ω–µ–¥–µ–ª—è)",
        6: "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ (2 –Ω–µ–¥–µ–ª—è)",
        7: "–í—Ç–æ—Ä–Ω–∏–∫ (2 –Ω–µ–¥–µ–ª—è)",
        8: "–°—Ä–µ–¥–∞ (2 –Ω–µ–¥–µ–ª—è)",
        9: "–ß–µ—Ç–≤–µ—Ä–≥ (2 –Ω–µ–¥–µ–ª—è)",
        10: "–ü—è—Ç–Ω–∏—Ü–∞ (2 –Ω–µ–¥–µ–ª—è)"
    }
    return day_names.get(day_number, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –¥–µ–Ω—å")


def format_menu(menu, day_number, group_type):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏"""
    group_name = "–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç" if group_type == "nursery" else "–æ—Ç 3 –¥–æ 7 –ª–µ—Ç"

    text = f"<b>{group_name}</b>\n"
    text += f"<b>{get_day_name(day_number)}</b>\n\n"

    for meal, description in menu[day_number].items():
        text += f"<b>{meal.title()}:</b>\n{description}\n\n"

    return text


def get_weekend_message(date):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è"""
    day_names = {
        5: "—Å—É–±–±–æ—Ç–∞",
        6: "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"
    }
    day_name = day_names.get(date.weekday(), "–≤—ã—Ö–æ–¥–Ω–æ–π")

    # –ù–∞—Ö–æ–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
    days_forward = 1
    while is_weekend(date + timedelta(days=days_forward)):
        days_forward += 1
    next_working_day = date + timedelta(days=days_forward)
    next_day_number = get_day_number(next_working_day)

    return (
        f"<b>–ú–µ–Ω—é –Ω–∞ {date.strftime('%d.%m.%Y')} ({day_name.capitalize()})</b>\n\n"
        "üçΩ <b>–î–µ—Ç—Å–∫–∏–π —Å–∞–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</b>\n\n"
        f"–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å: {next_working_day.strftime('%d.%m.%Y')}\n"
        f"–ú–µ–Ω—é: {get_day_name(next_day_number)}"
    )


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    keyboard = [
        [InlineKeyboardButton("–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç", callback_data="nursery_today")],
        [InlineKeyboardButton("–æ—Ç 3 –¥–æ 7 –ª–µ—Ç", callback_data="main_today")],
        [InlineKeyboardButton("–ú–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
        [InlineKeyboardButton("–ú–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞", callback_data="tomorrow_both")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    today = datetime.now()
    day_number = get_day_number(today)

    welcome_text = (
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –º–µ–Ω—é –¥–µ—Ç—Å–∫–æ–≥–æ —Å–∞–¥–∞ ‚Ññ38!\n\n"
        f"<b>–°–µ–≥–æ–¥–Ω—è:</b> {today.strftime('%d.%m.%Y')}\n"
        f"<b>–¢–µ–∫—É—â–∏–π –¥–µ–Ω—å –º–µ–Ω—é:</b> {get_day_name(day_number)}\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞ –∏–ª–∏ –¥–µ–Ω—å:"
    )

    await update.message.reply_text(
        welcome_text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()

    data = query.data

    if data == "nursery_today":
        await show_today_single_group(query, "nursery")
    elif data == "main_today":
        await show_today_single_group(query, "main")
    elif data == "today_both":
        await show_today_both_groups(query)
    elif data == "tomorrow_both":
        await show_tomorrow_both_groups(query)
    elif data == "nursery_tomorrow":
        await show_tomorrow_single_group(query, "nursery")
    elif data == "main_tomorrow":
        await show_tomorrow_single_group(query, "main")
    elif data == "back_to_main":
        await show_main_menu(query)


async def show_main_menu(query):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    today = datetime.now()
    day_number = get_day_number(today)

    keyboard = [
        [InlineKeyboardButton("–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç", callback_data="nursery_today")],
        [InlineKeyboardButton("–æ—Ç 3 –¥–æ 7 –ª–µ—Ç", callback_data="main_today")],
        [InlineKeyboardButton("–ú–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
        [InlineKeyboardButton("–ú–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞", callback_data="tomorrow_both")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    text = (
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –º–µ–Ω—é –¥–µ—Ç—Å–∫–æ–≥–æ —Å–∞–¥–∞ ‚Ññ38!\n\n"
        f"<b>–°–µ–≥–æ–¥–Ω—è:</b> {today.strftime('%d.%m.%Y')}\n"
        f"<b>–¢–µ–∫—É—â–∏–π –¥–µ–Ω—å –º–µ–Ω—é:</b> {get_day_name(day_number)}\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞ –∏–ª–∏ –¥–µ–Ω—å:"
    )

    await query.edit_message_text(
        text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def show_today_single_group(query, group_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã"""
    today = datetime.now()

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω—ã–º
    if is_weekend(today):
        text = get_weekend_message(today)
        keyboard = [
            [InlineKeyboardButton("–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å", callback_data="tomorrow_both")],
            [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.edit_message_text(
            text,
            reply_markup=reply_markup,
            parse_mode='HTML'
        )
        return

    day_number = get_day_number(today)
    menu = NURSERY_MENU if group_type == "nursery" else MAIN_MENU
    group_name = "–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç" if group_type == "nursery" else "–æ—Ç 3 –¥–æ 7 –ª–µ—Ç"

    text = f"<b>–ú–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({today.strftime('%d.%m.%Y')})</b>\n"
    text += f"<b>{group_name}</b>\n"
    text += f"<i>{get_day_name(day_number)}</i>\n\n"

    text += format_menu(menu, day_number, group_type)

    keyboard = [
        [InlineKeyboardButton("–î—Ä—É–≥–∞—è –≥—Ä—É–ø–ø–∞",
                              callback_data="main_today" if group_type == "nursery" else "nursery_today")],
        [InlineKeyboardButton("–û–±–µ –≥—Ä—É–ø–ø—ã", callback_data="today_both")],
        [InlineKeyboardButton("–ó–∞–≤—Ç—Ä–∞", callback_data="tomorrow_both")],
        [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(
        text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def show_tomorrow_single_group(query, group_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –¥–ª—è –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã"""
    tomorrow = datetime.now() + timedelta(days=1)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–≤—Ç—Ä–∞ –≤—ã—Ö–æ–¥–Ω—ã–º
    if is_weekend(tomorrow):
        text = get_weekend_message(tomorrow)
        keyboard = [
            [InlineKeyboardButton("–°–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
            [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.edit_message_text(
            text,
            reply_markup=reply_markup,
            parse_mode='HTML'
        )
        return

    day_number = get_day_number(tomorrow)
    menu = NURSERY_MENU if group_type == "nursery" else MAIN_MENU
    group_name = "–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç" if group_type == "nursery" else "–æ—Ç 3 –¥–æ 7 –ª–µ—Ç"

    text = f"<b>–ú–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞ ({tomorrow.strftime('%d.%m.%Y')})</b>\n"
    text += f"<b>{group_name}</b>\n"
    text += f"<i>{get_day_name(day_number)}</i>\n\n"

    text += format_menu(menu, day_number, group_type)

    keyboard = [
        [InlineKeyboardButton("–î—Ä—É–≥–∞—è –≥—Ä—É–ø–ø–∞",
                              callback_data="main_tomorrow" if group_type == "nursery" else "nursery_tomorrow")],
        [InlineKeyboardButton("–û–±–µ –≥—Ä—É–ø–ø—ã", callback_data="tomorrow_both")],
        [InlineKeyboardButton("–°–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
        [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(
        text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def show_today_both_groups(query):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –æ–±–µ–∏—Ö –≥—Ä—É–ø–ø"""
    today = datetime.now()

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω—ã–º
    if is_weekend(today):
        text = get_weekend_message(today)
        keyboard = [
            [InlineKeyboardButton("–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å", callback_data="tomorrow_both")],
            [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.edit_message_text(
            text,
            reply_markup=reply_markup,
            parse_mode='HTML'
        )
        return

    day_number = get_day_number(today)

    text = f"<b>–ú–µ–Ω—é –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({today.strftime('%d.%m.%Y')})</b>\n"
    text += f"<i>{get_day_name(day_number)}</i>\n\n"

    text += format_menu(NURSERY_MENU, day_number, "nursery")
    text += "\n" + "=" * 50 + "\n\n"
    text += format_menu(MAIN_MENU, day_number, "main")

    keyboard = [
        [
            InlineKeyboardButton("–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç", callback_data="nursery_today"),
            InlineKeyboardButton("–æ—Ç 3 –¥–æ 7 –ª–µ—Ç", callback_data="main_today")
        ],
        [InlineKeyboardButton("–ó–∞–≤—Ç—Ä–∞", callback_data="tomorrow_both")],
        [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(
        text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def show_tomorrow_both_groups(query):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –¥–ª—è –æ–±–µ–∏—Ö –≥—Ä—É–ø–ø"""
    tomorrow = datetime.now() + timedelta(days=1)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–≤—Ç—Ä–∞ –≤—ã—Ö–æ–¥–Ω—ã–º
    if is_weekend(tomorrow):
        text = get_weekend_message(tomorrow)
        keyboard = [
            [InlineKeyboardButton("–°–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
            [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.edit_message_text(
            text,
            reply_markup=reply_markup,
            parse_mode='HTML'
        )
        return

    day_number = get_day_number(tomorrow)

    text = f"<b>–ú–µ–Ω—é –Ω–∞ –∑–∞–≤—Ç—Ä–∞ ({tomorrow.strftime('%d.%m.%Y')})</b>\n"
    text += f"<i>{get_day_name(day_number)}</i>\n\n"

    text += format_menu(NURSERY_MENU, day_number, "nursery")
    text += "\n" + "=" * 50 + "\n\n"
    text += format_menu(MAIN_MENU, day_number, "main")

    keyboard = [
        [
            InlineKeyboardButton("–æ—Ç 1.5 –¥–æ 3 –ª–µ—Ç", callback_data="nursery_tomorrow"),
            InlineKeyboardButton("–æ—Ç 3 –¥–æ 7 –ª–µ—Ç", callback_data="main_tomorrow")
        ],
        [InlineKeyboardButton("–°–µ–≥–æ–¥–Ω—è", callback_data="today_both")],
        [InlineKeyboardButton("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(
        text,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


def signal_handler(signum, frame):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è graceful shutdown"""
    logging.info("–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–±–æ—Ç—É...")
    sys.exit(0)


def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)

    TOKEN = '8394944611:AAE77C11uJ0-Wpog_4WJUOUJKJW5hjq2OlM'

    try:
        # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
        application = Application.builder().token(TOKEN).build()

        application.add_handler(CommandHandler("start", start))
        application.add_handler(CallbackQueryHandler(button_handler))

        logging.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
        logging.info(f"–ù–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞: {CYCLE_START_DATE.strftime('%d.%m.%Y %A')}")

        today = datetime.now()
        day_number = get_day_number(today)
        logging.info(f"–°–µ–≥–æ–¥–Ω—è: {today.strftime('%d.%m.%Y %A')}")
        logging.info(f"–î–µ–Ω—å —Ü–∏–∫–ª–∞: {day_number} - {get_day_name(day_number)}")
        logging.info(f"–í—ã—Ö–æ–¥–Ω–æ–π: {is_weekend(today)}")

        # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
        application.run_polling()

    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞: {e}")
        logging.info("–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥...")
        time.sleep(10)
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º os.execv –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤–º–µ—Å—Ç–æ —Ä–µ–∫—É—Ä—Å–∏–∏
        os.execv(sys.executable, ['python'] + sys.argv)


if __name__ == '__main__':
    import time
    main()
